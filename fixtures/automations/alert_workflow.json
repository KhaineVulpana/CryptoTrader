{
  "v": 1,
  "id": "alertWorkflow",
  "graph": {
    "nodes": [
      { "id": "e1", "type": "onSchedule", "props": { "cron": "0 * * * *", "timezone": "UTC" } },
      { "id": "u1", "type": "universe", "props": { "symbols": ["BTCUSDT", "ETHUSDT", "SOLUSDT"] } },
      { "id": "f1", "type": "forEach", "props": { "source": "u1" } },
      { "id": "r1", "type": "rank", "props": { "metric": "momentum", "limit": 2 } },
      { "id": "i1", "type": "indicator", "props": { "name": "rsi", "len": 14 } },
      { "id": "c1", "type": "compare", "props": { "left": "i1", "op": "LT", "right": "30" } },
      { "id": "cd1", "type": "cooldown", "props": { "ms": 300000 } },
      { "id": "risk1", "type": "riskSize", "props": { "riskPct": 2.5 } },
      { "id": "atr1", "type": "atrStop", "props": { "atrMult": 2.0 } },
      { "id": "trail1", "type": "trailStop", "props": { "trailingPct": 4.0 } },
      { "id": "emit1", "type": "emitSpread", "props": { "long": "BTCUSDT", "short": "ETHUSDT" } },
      { "id": "log1", "type": "log", "props": { "message": "Entering spread" } },
      { "id": "notify1", "type": "notify", "props": { "channel": "push", "message": "Spread entered" } },
      { "id": "abort1", "type": "abort", "props": { "reason": "Risk breach" } },
      { "id": "stateGet1", "type": "stateGet", "props": { "key": "lastRun" } },
      { "id": "stateSet1", "type": "stateSet", "props": { "key": "lastRun", "value": "now" } },
      { "id": "math1", "type": "math", "props": { "expr": "(a-b)/b" } },
      { "id": "window1", "type": "window", "props": { "len": 20 } },
      { "id": "pair1", "type": "pairFeed", "props": { "symbol": "ETHBTC", "interval": "H1" } },
      { "id": "if1", "type": "if", "props": { "condition": "oversold" } },
      { "id": "else1", "type": "else" },
      { "id": "onPnL1", "type": "onPnL", "props": { "threshold": 10.0 } },
      { "id": "onTick1", "type": "onTick" },
      { "id": "onFill1", "type": "onFill", "props": { "symbol": "BTCUSDT" } }
    ],
    "edges": [
      ["e1", "u1"],
      ["u1", "f1"],
      ["f1", "r1"],
      ["r1", "i1"],
      ["i1", "c1"],
      ["c1", "cd1"],
      ["cd1", "risk1"],
      ["risk1", "atr1"],
      ["atr1", "trail1"],
      ["trail1", "emit1"],
      ["emit1", "log1"],
      ["log1", "notify1"],
      ["notify1", "abort1"],
      ["e1", "stateGet1"],
      ["stateGet1", "math1"],
      ["math1", "stateSet1"],
      ["stateSet1", "log1"],
      ["onTick1", "window1"],
      ["window1", "pair1"],
      ["pair1", "if1"],
      ["if1", "else1"],
      ["else1", "abort1"],
      ["onPnL1", "trail1"],
      ["onFill1", "notify1"]
    ]
  }
}
